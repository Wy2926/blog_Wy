(function(){$(function(){function u(){location.reload(!0)}var r=abp.services.app.blog,n=$("#BlogSiteConfigEditModal"),t=n.find("form"),i=$("#file");t.validate({});$("#weChat").click(function(){i.trigger("click")});$("#deleteWeChat").click(function(){$("#weChat").attr("src","/images/up.png");$("#weChatValue").val("")});i.change(function(){var n=new FormData;n.append(i[0].name,i[0].files[0]);abp.ajax({url:"/Blog/OnPostUpload",type:"POST",data:n,processData:!1,contentType:!1,async:!1,success:function(n){$("#weChat").attr("src",n.data[0]);$("#weChatValue").val(n.data[0])},error:function(n){abp.message.error(n)}})});$("#RefreshButton").click(function(){u()});$("#clearcache").click(function(){r.clearCache().done(function(){abp.message.success("博客缓存清理完成","缓存清理")})});t.find('button[type="submit"]').click(function(i){if(i.preventDefault(),t.valid()){var u=t.serializeFormToObject();abp.ui.setBusy(n);r.updateSiteConfig(u).done(function(){n.modal("hide");abp.message.success("站点配置修改成功","修改完成")}).always(function(){abp.ui.clearBusy(n)})}});n.on("shown.bs.modal",function(){n.find("input:not([type=hidden]):first").focus()})})})();